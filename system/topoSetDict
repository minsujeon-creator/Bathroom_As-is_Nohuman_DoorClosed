/*--------------------------------*- C++ -*----------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  v2312                                 |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    object      topoSetDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

actions
(
    // Faces on the wall patch that contains the door (adjust 'room' if needed)
    {
        name    wallFaces;
        type    faceSet;
        action  new;
        source  patchToFace;
        sourceInfo
        {
            patches ( room );
        }
    }

    // Vent: faces inside the specified box
    {
        name        ventFaces;
        type        faceSet;
        action      new;
        source      boxToFace;
        sourceInfo
        {
            // 0.3 Ã— 0.3 vent on ceiling corner
            box (1.7 0.266 2.24999) (1.9 0.466 2.7);
        }
    }

    // Big door coverage box (slightly larger than door opening)
    {
        name        doorFaces;
        type        faceSet;
        action      new;
        source      boxToFace;
        sourceInfo
        {
            // Door on x=0 wall
            box (0.0218 -1 0.046) (0.768 0.0001 2.154);
        }
    }

    // Solid closed-door area to EXCLUDE from the slit
    {
        name        doorClosedFaces;
        type        faceSet;
        action      new;
        source      boxToFace;
        sourceInfo
        {
            // Solid door box (inside the big door box)
            box (0.0248 -1 0.05) (0.765 0.0001 2.15);
        }
    }

    // Build doorSlitFaces = doorFaces - doorClosedFaces, limited to wallFaces
    // 1) copy doorFaces
    {
        name        doorSlitFaces;
        type        faceSet;
        action      new;
        source      setToFace;
        sourceInfo
        {
            set doorFaces;
        }
    }
    // 2) subtract the closed door faces
    {
        name        doorSlitFaces;
        type        faceSet;
        action      delete;
        source      setToFace;
        sourceInfo
        {
            set doorClosedFaces;
        }
    }
    // 3) keep only faces on the wall patch (safety)
    {
        name        doorSlitFaces;
        type        faceSet;
        action      subset;
        source      setToFace;
        sourceInfo
        {
            set wallFaces;
        }
    }

    // Your scalar-injection cells
    {
        name    pooCells;
        type    cellSet;
        action  new;
        source  boxToCell;
        sourceInfo
        {
            box (0.2 0.85 0.245) (0.5 1.25 0.255);
        }
    }
);
